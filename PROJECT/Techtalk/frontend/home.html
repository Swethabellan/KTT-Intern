<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Question Board</title>
  <link rel="stylesheet" href="./home.css">
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0-beta3/css/all.min.css">
</head>

<body>
  <div class="navbar">

    <img src="./techtalk2.jpg" class="log" width="60px" height="50px">

    <input type="text" class="search-bar" placeholder="Search question">
    <div class="nav-links">
      <a href="#">News</a>
      <a href="#">Forums</a>
      <a href="#">Blogs</a>
    </div>
    <a href="./profile.html" class="sign-in">Profile</a>
  </div>


  <div class="container">
    <div class="sidebar">
      <h2></h2>
      <div class="product">
        <h3 class="a">Total Questions</h3>
      </div>
      <div class="product">
        <h3 class="a">Answered</h3>
      </div>
      <div class="product">
        <h3 class="a">Unanswered</h3>
      </div>
    </div>


    <div style="width: 80%;">
      <div class="q">
        <h1>Question Board</h1>
        <button class="open-button" onclick="openForm(); showContent('question-form')"
          style="width: 150px;height: 40px; background-color: #e74c3c; color:#fff; border-radius: 5px; margin-top: 10px; border:#fff;">Post
          Questions</button>
      </div>

      <div class="main-content" id="main-div">
        <div id="myForm" class="form-popup">

          <form id="question-form" class="form-container inactive">
            <div class="form-group">
              <label for="title">Title</label>
              <input type="text" id="title" name="title" required>
            </div>
            <div class="form-group">
              <label for="description">Description</label>
              <textarea id="description" name="description" required></textarea>
            </div>
            <button type="submit" class="submit-btn">Submit</button>
            <button type="button" id="cancel-btn" class="cancel-btn" onclick="closeForm()">Cancel</button>
          </form>
        </div>
      </div>


      <!-- Questions List -->
      <div id="questions-list">
        <!-- Questions will be dynamically loaded here -->
      </div>

      <div class="question">
        <h3>JavaScript</h3>
        <h4>How can I remove a specific item from an array in JavaScript?</h4>
        <div class="meta">Upvote <i class="fas fa-thumbs-up upvote"> (40)</i> downvote<i
            class="fas fa-thumbs-down downvote"> (14)</i> </div>
      </div>
      <div class="question">
        <h3>PostgreSQL</h3>
        <h4>PostgreSQL Table Field exists in Type Field;</h4>
        <div class="meta">Upvote <i class="fas fa-thumbs-up upvote"> (10)</i>downvote <i
            class="fas fa-thumbs-down downvote"> (1)</i> </div>
      </div>
      <div class="question">
        <h3>Programming </h3>
        <h4> Functional programming vs Object Oriented programming [closed]</h4>
        <div class="meta">Upvote <i class="fas fa-thumbs-up upvote"> (14)</i>downvote <i
            class="fas fa-thumbs-down downvote"> (13)</i></div>
      </div>
      <div class="question">
        <h3>Artificial Intelligence</h3>
        <h4>What is the most unusual use of artificial intelligence you have seen?</h4>
        <div class="meta">Upvote <i class="fas fa-thumbs-up upvote"> (36)</i>downvote <i
            class="fas fa-thumbs-down downvote"> (29)</i></div>
      </div>
      <div class="question">
        <h3>Node.js</h3>
        <h4>How do I get started with Node.js</h4>
        <div class="meta">Upvote <i class="fas fa-thumbs-up upvote"> (36)</i> downvote<i
            class="fas fa-thumbs-down downvote"> (29)</i></div>
      </div>
    </div>
  </div>

  </div>

  <script>

    function showContent(id) {
      const contents = document.querySelectorAll('.inactive');
      contents.forEach(c => c.classList.remove('active'));

      const target = document.getElementById(id);
      if (target) {
        target.classList.add('active');
      }
    }
    function openForm() {
      document.getElementById("myForm").style.display = "block";
    }

    function closeForm() {
      document.getElementById("myForm").style.display = "none";
    }

    async function postQuestion(event) {
      event.preventDefault();
      const title = document.getElementById('title');
      const description = document.getElementById('description');

      try {
        const response = await fetch('/api/questions', {  
          method: 'POST',
          headers: { 'Content-Type': 'application/json' },
          body: JSON.stringify({
            title,
            description
          })
        });

        const data = await response.json();

        if (response.ok) {
          alert("Question added successfully");
          // optionally update UI here
        } else {
          alert("Error: " + (data.message || "Something went wrong"));
        }
      } catch (error) {
        alert("Fetch error: " + error.message);
      }
      event.target.reset()
    }

  </script>
</body>

</html>